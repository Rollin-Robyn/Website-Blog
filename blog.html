<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>testPage — Blog</title>
    <meta name="description" content="Blog posts from testPage." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/blog.css" />
  </head>
  <body>
    <canvas id="stars-canvas"></canvas>

    <div class="blog-page-container">
      <!-- ========== BLOG HEADER ========== -->
      <div class="blog-page-header panel">
        <a href="index.html" class="back-link">&#10094; BACK</a>
        <h1 class="blog-page-title">BLOG</h1>
        <div class="blog-page-header-right">
          <button id="new-post-btn" class="admin-action-btn hidden">+ NEW POST</button>
        </div>
      </div>

      <!-- ========== PENDING POSTS QUEUE ========== -->
      <div id="pending-queue-panel" class="pending-queue-panel panel hidden">
        <div class="pending-queue-header">
          <h2 class="panel-title">
            PENDING POSTS: <span id="pending-count" class="pending-count">0</span>
          </h2>
          <div class="pending-queue-actions">
            <button id="publish-all-btn" class="admin-action-btn publish-all-btn" disabled>
              &#9650; PUBLISH ALL
            </button>
            <button id="clear-queue-btn" class="btn-secondary clear-queue-btn">
              CLEAR
            </button>
          </div>
        </div>
        <div id="pending-posts-list" class="pending-posts-list"></div>
      </div>

      <!-- ========== DELETE QUEUE PANEL ========== -->
      <div id="delete-queue-panel" class="delete-queue-panel panel hidden">
        <div class="delete-queue-header">
          <h2 class="panel-title">
            MARKED FOR DELETION: <span id="delete-count" class="delete-count">0</span>
          </h2>
          <div class="delete-queue-actions">
            <button id="delete-all-btn" class="admin-action-btn delete-all-btn" disabled>
              &#9660; DELETE ALL
            </button>
            <button id="clear-delete-btn" class="btn-secondary clear-queue-btn">
              UNMARK ALL
            </button>
          </div>
        </div>
        <div id="delete-posts-list" class="delete-posts-list"></div>
      </div>

      <!-- ========== SEARCH & FILTER ========== -->
      <div class="blog-toolbar panel">
        <div class="search-box">
          <span class="search-icon">&#128269;</span>
          <input type="text" id="blog-search" placeholder="Search posts..." autocomplete="off" />
        </div>
        <div class="sort-controls">
          <button id="sort-newest" class="sort-btn active" title="Newest first">NEW &#9660;</button>
          <button id="sort-oldest" class="sort-btn" title="Oldest first">OLD &#9650;</button>
        </div>
      </div>

      <!-- ========== POST COUNT ========== -->
      <div class="blog-post-count">
        <span id="post-count-text">Loading...</span>
      </div>

      <!-- ========== POSTS GRID ========== -->
      <div id="blog-posts-grid" class="blog-posts-grid">
        <p style="font-size:0.7rem;color:var(--text-muted);text-align:center;padding:40px 0;">
          Loading posts...
        </p>
      </div>
    </div>

    <!-- Settings button -->
    <button id="settings-btn" class="floating-btn floating-btn-settings" title="Settings">
      &#9881;
    </button>

    <!-- Admin floating buttons -->
    <button id="admin-login-btn" class="floating-btn" title="Admin Login">
      &#128273;
    </button>
    <button id="admin-logout-btn" class="floating-btn hidden" title="Logout">
      &#128682;
    </button>

    <!-- ========== LOGIN MODAL ========== -->
    <div id="login-modal" class="modal-overlay hidden">
      <div class="modal">
        <h2>ADMIN LOGIN</h2>
        <div class="form-group">
          <label for="login-username">USERNAME:</label>
          <input type="text" id="login-username" autocomplete="username" />
        </div>
        <div class="form-group">
          <label for="login-password">PASSWORD:</label>
          <input type="password" id="login-password" autocomplete="current-password" />
        </div>
        <div class="form-group">
          <label for="login-token">GITHUB TOKEN:</label>
          <input type="password" id="login-token" autocomplete="off" placeholder="ghp_xxxxxxxxxxxx" />
          <span style="font-size:0.55rem;color:var(--text-muted);margin-top:4px;display:block;">
            Fine-grained PAT with Contents read/write
          </span>
        </div>
        <p id="login-error" class="error-text hidden">WRONG CREDENTIALS!</p>
        <div class="modal-actions">
          <button id="login-submit-btn" class="btn-primary">LOGIN</button>
          <button id="login-cancel-btn" class="btn-secondary">CANCEL</button>
        </div>
      </div>
    </div>

    <!-- ========== NEW POST MODAL ========== -->
    <div id="new-post-modal" class="modal-overlay hidden">
      <div class="modal modal-wide">
        <h2>NEW BLOG POST</h2>

        <div class="form-group">
          <label>TITLE & COLOR:</label>
          <div style="display:flex;gap:10px;align-items:center;">
            <input type="text" id="post-title" placeholder="Enter post title..." style="flex:1;" />
            <input type="color" id="post-title-color" value="#ff00de" title="Title Color"
              style="width:40px;height:35px;border:none;cursor:pointer;" />
          </div>
        </div>

        <div class="form-group">
          <label>DEFAULT TEXT COLOR:</label>
          <div style="display:flex;align-items:center;gap:10px;">
            <input type="color" id="post-color" value="#e0e0e0"
              style="width:40px;height:30px;border:none;cursor:pointer;" />
            <span style="font-size:0.7rem;color:var(--text-muted);">Base text color</span>
          </div>
        </div>

        <div class="form-group">
          <label for="post-content">CONTENT:</label>
          <div class="editor-toolbar" style="margin-bottom:5px;display:flex;gap:5px;align-items:center;">
            <button id="btn-bold" class="btn-tool" title="Bold">B</button>
            <button id="btn-italic" class="btn-tool" title="Italic">I</button>
            <button id="btn-header" class="btn-tool" title="Header">H</button>
            <button id="btn-undo" class="btn-tool" title="Undo">↶</button>
            <button id="btn-redo" class="btn-tool" title="Redo">↷</button>
            <div style="width:1px;height:20px;background:var(--border-color);margin:0 5px;"></div>
            <input type="color" id="editor-color" value="#00ff00"
              style="width:30px;height:30px;border:none;padding:0;cursor:pointer;" title="Select Color" />
            <button id="btn-color-apply" class="btn-tool" title="Apply Color to Selection">COLOR</button>
          </div>
          <textarea id="post-content" rows="8" placeholder="Write your post..."
            style="font-family:monospace;font-size:0.85rem;"></textarea>
        </div>

        <div class="form-group">
          <label for="post-image">IMAGES (OPTIONAL):</label>
          <input type="file" id="post-image" accept="image/*" multiple />
          <div class="image-preview-container" id="image-preview"></div>
        </div>

        <div class="modal-actions">
          <button id="post-submit-btn" class="btn-primary">ADD TO QUEUE</button>
          <button id="post-cancel-btn" class="btn-secondary">CANCEL</button>
        </div>
      </div>
    </div>

    <!-- ========== SETTINGS MODAL ========== -->
    <div id="settings-modal" class="modal-overlay hidden">
      <div class="modal">
        <h2>&#9881; SETTINGS</h2>

        <div class="settings-group">
          <label class="settings-label">FONT SIZE:</label>
          <div class="settings-slider-row">
            <span class="settings-slider-label">A</span>
            <input type="range" id="setting-font-size" min="8" max="16" value="10" step="1" class="settings-slider" />
            <span class="settings-slider-label settings-slider-label-big">A</span>
            <span id="font-size-value" class="settings-value">10px</span>
          </div>
        </div>

        <div class="settings-group">
          <label class="settings-label">LINE HEIGHT:</label>
          <div class="settings-slider-row">
            <span class="settings-slider-label">&#9472;</span>
            <input type="range" id="setting-line-height" min="1.4" max="3.0" value="1.8" step="0.1" class="settings-slider" />
            <span class="settings-slider-label">&#9596;</span>
            <span id="line-height-value" class="settings-value">1.8</span>
          </div>
        </div>

        <div class="settings-group">
          <label class="settings-label">PAGE WIDTH:</label>
          <div class="settings-slider-row">
            <span class="settings-slider-label">&#9500;</span>
            <input type="range" id="setting-page-width" min="400" max="900" value="700" step="10" class="settings-slider" />
            <span class="settings-slider-label">&#9508;</span>
            <span id="page-width-value" class="settings-value">700px</span>
          </div>
        </div>

        <div class="settings-group">
          <label class="settings-label">GLOW EFFECTS:</label>
          <div class="settings-toggle-row">
            <button id="setting-glow" class="settings-toggle active" data-value="on">ON</button>
            <button id="setting-glow-off" class="settings-toggle" data-value="off">OFF</button>
          </div>
        </div>

        <div class="settings-group">
          <label class="settings-label">SCANLINES:</label>
          <div class="settings-toggle-row">
            <button id="setting-scanlines" class="settings-toggle active" data-value="on">ON</button>
            <button id="setting-scanlines-off" class="settings-toggle" data-value="off">OFF</button>
          </div>
        </div>

        <div class="settings-group">
          <label class="settings-label">STARS:</label>
          <div class="settings-toggle-row">
            <button id="setting-stars" class="settings-toggle active" data-value="on">ON</button>
            <button id="setting-stars-off" class="settings-toggle" data-value="off">OFF</button>
          </div>
        </div>

        <div class="settings-divider"></div>

        <div class="modal-actions">
          <button id="settings-reset-btn" class="btn-secondary">RESET</button>
          <button id="settings-close-btn" class="btn-primary">CLOSE</button>
        </div>
      </div>
    </div>

    <!-- ========== POST DETAIL MODAL ========== -->
    <div id="post-detail-modal" class="modal-overlay hidden">
      <div class="modal modal-wide">
        <div id="post-detail-content"></div>
        <div class="modal-actions">
          <button id="post-detail-close" class="btn-secondary">CLOSE</button>
        </div>
      </div>
    </div>

    <!-- ========== LIGHTBOX MODAL ========== -->
    <div id="lightbox-modal" class="modal-overlay hidden" style="z-index:2000;cursor:pointer;">
      <span class="lightbox-close-btn">&times;</span>
      <img id="lightbox-img" alt="Zoomed image" />
    </div>

    <script src="js/blog.js"></script>
  </body>
</html>